//https://github.com/lcoq/ember-validations

(function(){var n=Ember.get,t=Ember.set;Ember.ValidationError=Ember.Object.extend({key:null,customMessage:null,messageFormat:null,message:Ember.computed(function(){var t=n(this,"customMessage")||Ember.ValidationError.getMessage(n(this,"key")),i=n(this,"messageFormat"),r,u;if(Ember.assert("no message are defined for key: "+n(this,"key"),t),i)for(r in i)i.hasOwnProperty(r)&&(u=new RegExp("@{"+r+"}"),t.match(u)&&(t=t.replace(u,i[r]||"")));return t}).property("key","customMessage").cacheable()});Ember.ValidationError.reopenClass({messages:{},addMessage:function(n,t){this.messages[n]=t},addMessages:function(t){var r=n(this,"addMessage");for(var i in t)t.hasOwnProperty(i)&&this.addMessage(i,t[i])},getMessage:function(n){return this.messages[n]}})})(),function(){var n=Ember.get,t=Ember.set;Ember.ValidationErrors=Ember.Object.extend({_nestedErrors:null,_content:null,init:function(){this._super();this._resetErrors()},allKeys:Ember.computed(function(){return this._allErrorsData("keys")}).property("length").cacheable(),allMessages:Ember.computed(function(){return this._allErrorsData("messages")}).property("length").cacheable(),fullMessages:Ember.computed(function(){return n(this,"allMessages").map(function(n){var t=n[0];return n[0]!==""&&(t+=" "),t+n[1]})}).property("allMessages").cacheable(),keys:Ember.computed(function(){var i=n(this,"_content"),t=Ember.A();return i.forEach(function(n){t.push(n.get("key"))}),t}).property("length").cacheable(),messages:Ember.computed(function(){var i=n(this,"_content"),t=Ember.A();return i.forEach(function(n){t.push(n.get("message"))}),t}).property("length").cacheable(),length:Ember.computed(function(){var t=0,i=n(this,"_content"),r=n(this,"_nestedErrors");return t+=i.length,r.forEach(function(i,r){t+=n(r,"length")}),t}).cacheable(),unknownProperty:function(t){var i=n(this,"_nestedErrors");return i.get(t)},add:function(t,i,r,u){var e,f,o;this.propertyWillChange("length");t?(f=this._pathsForAttribute(t),o=this._getOrCreateNestedErrors(f.path),o.add(f.nestedPath,i,r,u)):(e=Ember.ValidationError.create({key:i,customMessage:u,messageFormat:r}),n(this,"_content").pushObject(e));this.propertyDidChange("length")},remove:function(t){if(this.propertyWillChange("length"),t){var u=n(this,"_nestedErrors"),i=this._pathsForAttribute(t),r=u.get(i.path);r&&r.remove(i.nestedPath)}else this._resetErrors();this.propertyDidChange("length")},clear:function(){this.propertyWillChange("length");this._resetErrors();this.propertyDidChange("length")},_getOrCreateNestedErrors:function(t){var r=n(this,"_nestedErrors"),i=r.get(t);return i||(i=Ember.ValidationErrors.create(),r.set(t,i)),i},_pathsForAttribute:function(n){var t=Ember.A(n.split("."));return{path:t[0],nestedPath:t.removeAt(0).join(".")}},_resetErrors:function(){t(this,"_content",Ember.A());t(this,"_nestedErrors",Ember.Map.create())},_allErrorsData:function(t){var u=n(this,t),i=Ember.A(),r;return u.forEach(function(n){i.push(["",n])}),r=n(this,"_nestedErrors"),r.forEach(function(n,r){var u="all"+t[0].toUpperCase()+t.slice(1),f=r.get(u);f.forEach(function(t){var r=n;t[0]!==""&&(r+="."+t[0]);i.push([r,t[1]])})}),i}})}(),function(){var n=Ember.get,t=Ember.set;Ember.Validations=Ember.Mixin.create({init:function(){this._super();n(this,"validationErrors")===undefined&&t(this,"validationErrors",Ember.ValidationErrors.create())},validate:function(){var i=n(this,"validations"),r=n(this,"validationErrors"),t;this.propertyWillChange("validationErrors");r.clear();for(t in i)i.hasOwnProperty(t)&&this._validateProperty(t);return this.propertyDidChange("validationErrors"),n(this,"isValid")},validateProperty:function(n){this.propertyWillChange("validationErrors");var t=this._validateProperty(n);return this.propertyDidChange("validationErrors"),t},_validateProperty:function(t){var e=n(this,"validations"),o=n(this,"validationErrors"),i,r,u,f;o.remove(t);i=e[t];for(r in i)if(i.hasOwnProperty(r)&&(u=i[r],f=Ember.Validators.getValidator(r,u),f.validate(this,t,this.get(t)),n(this,"validationErrors."+t+".length")))return!1;return!n(this,"validationErrors."+t+".length")},isValid:Ember.computed(function(){return n(this,"validationErrors.length")===0}).property("validationErrors.length").cacheable()})}(),function(){Ember.Validators=Ember.Namespace.create({getValidator:function(n,t){var i=null,r=t,u;if(typeof t=="object"&&t.validator&&(Ember.Validator.detect(t.validator)?i=t.validator.create():typeof t.validator=="function"&&(i=Ember.Validator.create(),i.set("validate",t.validator)),i&&t.options&&(r=t.options)),i||(u=n.charAt(0).toUpperCase()+n.substring(1)+"Validator",Ember.Validator.detect(this[u])&&(i=this[u].create())),!i)throw new Error("Validator not found for name '"+n+"'.");return Ember.typeOf(r)!=="object"&&(r={value:r}),i.set("options",r),i}})}(),function(){Ember.Validator=Ember.Object.extend({init:function(){this._super();this.hasOwnProperty("options")||this.set("options",{});this.checkValidity&&this.checkValidity()},validate:function(n,t,i){if(this.shouldSkipValidations(n,t,i))return!1;this._validate(n,t,i)},shouldSkipValidations:function(n,t,i){var r=Ember.get(this,"options");return r.allowBlank===!0?i===""||i===null||i===undefined:!1},_validate:function(){throw new Error("Ember.Validator subclasses should implement _validate() method.");},optionValue:function(n,t,i){var r=this.get("options."+t);if(typeof r=="function"&&(r=r.apply(n)),i&&(typeof i!="string"||typeof r!==i)){if(i===undefined)return r}else return r;return null}})}(),function(){Ember.ValidationError.addMessage("blank","@{controlName} can't be blank");Ember.Validators.PresenceValidator=Ember.Validator.extend({shouldSkipValidations:function(){return!1},_validate:function(n,t,i){var f=Ember.A([undefined,null]),r,u;(f.contains(i)||i.match&&i.match(/^\s*$/))&&(r=this.optionValue(n,"controlName"),u={},r&&(u.controlName=r),n.get("validationErrors").add(t,"blank",u))}})}(),function(){var n=Ember.get;Ember.ValidationError.addMessages({notNumber:"@{controlName} should be a number",notInteger:"@{controlName} should be an integer",notGreaterThan:"@{controlName} should be greater than @{value}",notGreaterThanOrEqualTo:"@{controlName} should be greater than or equal to @{value}",notLessThan:"@{controlName} should be less than @{value}",notLessThanOrEqualTo:"@{controlName} should be less than or equal to @{value}",notEqual:"@{controlName} should be equal to @{value}"});Ember.Validators.NumericalityValidator=Ember.Validator.extend({_validate:function(t,i,r){var e=parseFloat(r),c=parseInt(r,10),o=n(t,"validationErrors"),s=this.optionValue(t,"controlName"),f={},h,u;s&&(f.controlName=s);isNaN(r)||isNaN(e)?o.add(i,"notNumber",f):(h=n(this,"options"),h.onlyInteger===!0&&e!==c&&o.add(i,"notInteger",f),u=this.optionValue(t,"greaterThan","number"),u!==null&&e<=u&&(f.value=u,o.add(i,"notGreaterThan",f)),u=this.optionValue(t,"greaterThanOrEqualTo","number"),u!==null&&e<u&&(f.value=u,o.add(i,"notGreaterThanOrEqualTo",f)),u=this.optionValue(t,"lessThan","number"),u!==null&&e>=u&&(f.value=u,o.add(i,"notLessThan",f)),u=this.optionValue(t,"lessThanOrEqualTo","number"),u!==null&&e>u&&(f.value=u,o.add(i,"notLessThanOrEqualTo",f)),u=this.optionValue(t,"equalTo","number"),u!==null&&e!==u&&(f.value=u,o.add(i,"notEqual",f)))},isValidForOption:function(n,t,i){var r=this.optionValue(t);return r!==null&&i.apply(n,r)}})}(),function(){var n=Ember.get;Ember.ValidationError.addMessages({tooShortLength:"@{controlName} is too short (minimum @{value} characters)",tooLongLength:"@{controlName} is too long (maximum @{value} characters)",wrongLength:"@{controlName} is the wrong length (should be @{value} characters)"});Ember.Validators.LengthValidator=Ember.Validator.extend({_validate:function(t,i,r){var h=n(this,"options"),e=n(t,"validationErrors"),o=r?Ember.get(r,"length"):0,u,s=this.optionValue(t,"controlName"),f={};s&&(f.controlName=s);u=this.optionValue(t,"is","number");u===null&&(u=this.optionValue(t,"value","number"));u!==null?o!==u&&(f.value=u,e.add(i,"wrongLength",f)):(u=this.optionValue(t,"minimum","number"),u!==null&&o<u&&(f.value=u,e.add(i,"tooShortLength",f)),u=this.optionValue(t,"maximum","number"),u!==null&&o>u&&(f.value=u,e.add(i,"tooLongLength",f)))}})}(),function(){var n=Ember.get;Ember.ValidationError.addMessages({invalid:"@{controlName} is invalid"});Ember.Validators.FormatValidator=Ember.Validator.extend({_validate:function(t,i,r){var s=n(this,"options"),e=n(t,"validationErrors"),u,o=this.optionValue(t,"controlName"),f={};o&&(f.controlName=o);r&&typeof r.match=="function"||(r="");u=this.optionValue(t,"with")||this.optionValue(t,"value");(typeof u=="string"||u instanceof RegExp)&&!r.match(u)&&e.add(i,"invalid",f);u=this.optionValue(t,"without");(typeof u=="string"||u instanceof RegExp)&&r.match(u)&&e.add(i,"invalid",f)}})}(),function(){}();
/*
//# sourceMappingURL=ember-validations.min.js.map
*/